// Generated by CoffeeScript 1.6.2
goog.provide('reAdoptAHydrant.services.HydrantService');

reAdoptAHydrant.services.HydrantService = function($rootScope, $http) {
  var adopt, search, service, _handleAdoptError, _handleAdoptSuccess, _handleSeachError, _handleSeachSuccess;

  search = function(lat, lon, callback) {
    var options;

    options = {
      method: 'GET',
      url: '/api/hydrants',
      params: {
        lat: lat,
        lon: lon
      }
    };
    return $http(options).success(_handleSeachSuccess.bind(this, callback)).error(_handleSeachError.bind(this, callback));
  };
  adopt = function(userId, hydrantId, callback) {
    var options;

    options = {
      method: 'POST',
      url: '/api/adopt',
      data: {
        userId: userId,
        hydrantId: hydrantId
      }
    };
    return $http(options).success(_handleAdoptSuccess.bind(this, callback)).error(_handleAdoptError.bind(this, callback));
  };
  _handleSeachSuccess = function(callback, data) {
    return callback(null, data);
  };
  _handleSeachError = function(data) {
    return callback(data);
  };
  _handleAdoptSuccess = function(callback, data) {
    $rootScope.$broadcast('adoption', data);
    return callback(null, data);
  };
  _handleAdoptError = function(data) {
    return callback(data);
  };
  service = {
    search: search,
    adopt: adopt
  };
  return service;
};
